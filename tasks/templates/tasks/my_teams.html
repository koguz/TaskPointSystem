{% extends "tasks/profile.html" %}
{% load static %}

{% block main_content %}
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h2 class="h5 mb-0">My Teams</h2>
    <span class="small text-muted">{{ teams|length }} total</span>
  </div>
  <div class="card-body">
    {% for team, members in team_members.items %}
    <div class="border rounded p-3 mb-3 bg-light">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div>
          <div class="fw-bold">{{ team.course.masterCourse.code }} / {{ team.name }}</div>
          <div class="small text-muted">{{ team.course.semester }}</div>
        </div>
        <a href="{% url 'team_view' team.pk %}" class="btn btn-sm btn-outline-primary">Open Team</a>
      </div>
      <div class="row g-2">
        {% for member in members %}
        <div class="col-12 col-md-6">
          <div class="d-flex align-items-center gap-2 border rounded p-2 bg-white">
            <img src="{{ member.photoURL }}" alt="{{ member.getName }}" class="avatar-sm" />
            <div>{{ member.getName }}</div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% empty %}
    <div class="empty-state">You are not assigned to any team.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
